(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{1548:function(e,s,t){Promise.resolve().then(t.bind(t,756))},756:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var r=t(7437),a=t(2265),n=t(6463),o=t(7453),l=()=>{let[e,s]=(0,a.useState)(!1),[t,r]=(0,a.useState)(null),l=(0,n.useRouter)(),{handleSetUserUsername:i}=(0,o.S)();return{register:async(e,t)=>{s(!0),r(null);try{let s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),r=await s.json();if(!s.ok)throw Error(r.message||"Error al registrarse");i(e),l.push("/")}catch(e){r(e.message)}finally{s(!1)}},isLoading:e,error:t}},i=t(9772);let c=i.z.object({username:i.z.string().min(1,"El nombre de usuario es requerido."),password:i.z.string().min(1,"La contrase\xf1a debe tener al menos 1 caracter."),confirmPassword:i.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"Las contrase\xf1as no coinciden",path:["confirmPassword"]});var u=()=>{let[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),{register:m,isLoading:h,error:x}=l(),p=async s=>{s.preventDefault();let r=c.safeParse({username:e,password:t,confirmPassword:o});if(!r.success){d(r.error.issues.map(e=>e.message).join(", "));return}d("");try{await m(e,t)}catch(e){console.error("Error al registrarse:",e),d("Error al registrarse. Por favor, int\xe9ntelo de nuevo.")}};return(0,r.jsxs)("div",{className:"w-full h-full",children:[(0,r.jsx)("h2",{className:"text-center",children:"Registro"}),(0,r.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:p,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username",children:"Usuario"}),(0,r.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"username",type:"text",placeholder:"Usuario",value:e,onChange:e=>s(e.target.value)}),(0,r.jsx)("p",{className:"text-gray-600 text-xs italic",children:"Debe ser \xfanico y contener al menos 1 car\xe1cter."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Contrase\xf1a"}),(0,r.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"*******",value:t,onChange:e=>n(e.target.value)}),(0,r.jsx)("p",{className:"text-gray-600 text-xs italic",children:"Debe tener al menos 1 caracter."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"confirmPassword",children:"Confirmar Contrase\xf1a"}),(0,r.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"confirmPassword",type:"password",placeholder:"*******",value:o,onChange:e=>i(e.target.value)}),(0,r.jsx)("p",{className:"text-gray-600 text-xs italic",children:"Debe coincidir con la contrase\xf1a."})]}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:h?(0,r.jsx)("i",{className:"bx bx-loader bx-spin bx-sm",children:"Cargando..."}):"Registrarse"})}),u&&(0,r.jsx)("p",{className:"text-red-500 text-center font-bold italic",children:u}),x&&(0,r.jsx)("p",{className:"text-red-500 text-center font-bold italic",children:x})]})]})}},7453:function(e,s,t){"use strict";t.d(s,{S:function(){return l},d:function(){return o}});var r=t(7437),a=t(2265);let n=(0,a.createContext)(void 0),o=e=>{let{children:s}=e,[t,o]=(0,a.useState)({username:""});return(0,r.jsx)(n.Provider,{value:{user:t,setUser:o,handleSetUserUsername:e=>{o(s=>({...s,username:e}))}},children:s})},l=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useUser must be used within a UserProvider");return e}}},function(e){e.O(0,[842,971,23,744],function(){return e(e.s=1548)}),_N_E=e.O()}]);